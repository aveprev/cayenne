<html>
  <head>
    <title>Cayenne Documentation - Access Classes</title>
    <style type="text/css">@import "../../../../style.css";</style>
  </head>
<body>
  <div class="header">
    <div style="float: left;"><a href="http://objectstyle.org/cayenne/"><img src="../../../../images/logo.gif" align="absmiddle" border="0"></a></div>
    <span class="logoSpaceLink"><a href="../../../../index.html">Cayenne User Documentation</a></span><br />
    <span class="pagetitle">Access Classes</span>
  </div>
<div id="cayenne_toc">
<ul>
<li><a href="../../../../Documentation/User Guide/Introduction/index.html">Introduction</a></li>
<li><a href="../../../../Documentation/User Guide/Installation/index.html">Installation</a></li>
<li><a href="../../../../Documentation/User Guide/Quick Start/index.html">Quick Start</a></li>
<li><a href="../../../../Documentation/User Guide/Design/index.html">Design</a><ul>
<li><a href="../../../../Documentation/User Guide/Design/Access Classes/index.html">Access Classes</a><ul>
</ul>
</li>
<li><a href="../../../../Documentation/User Guide/Design/Cayenne DataSource/index.html">Cayenne DataSource</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Cross-Database Issues/index.html">Cross-Database Issues</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Data Objects/index.html">Data Objects</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Event Package/index.html">Event Package</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Generated Columns/index.html">Generated Columns</a></li>
<li><a href="../../../../Documentation/User Guide/Design/How Information Is Stored in Cayenne/index.html">How Information Is Stored in Cayenne</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Object Graph/index.html">Object Graph</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Object Relational Mapping/index.html">Object Relational Mapping</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Primary Key Generation/index.html">Primary Key Generation</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Understanding Caching/index.html">Understanding Caching</a></li>
<li><a href="../../../../Documentation/User Guide/Design/Understanding Transactions/index.html">Understanding Transactions</a></li>
</ul>
</li>
<li><a href="../../../../Documentation/User Guide/Generating Classes/index.html">Generating Classes</a></li>
<li><a href="../../../../Documentation/User Guide/DataContext/index.html">DataContext</a></li>
<li><a href="../../../../Documentation/User Guide/Queries/index.html">Queries</a></li>
<li><a href="../../../../Documentation/User Guide/DataObjects/index.html">DataObjects</a></li>
<li><a href="../../../../Documentation/User Guide/Stored Procedures/index.html">Stored Procedures</a></li>
<li><a href="../../../../Documentation/User Guide/Expressions/index.html">Expressions</a></li>
<li><a href="../../../../Documentation/User Guide/Performance Tuning/index.html">Performance Tuning</a></li>
<li><a href="../../../../Documentation/User Guide/Deployment/index.html">Deployment</a></li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/index.html">Ant Tasks</a></li>
<li><a href="../../../../Documentation/User Guide/Access Stack Internals/index.html">Access Stack Internals</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/index.html">DataViews</a></li>
</ul>
</div>
<div id="ConfluenceContent"><p>Cayenne database access module consists of a stack of objects, all implementing QueryEngine interface:<br/>
<img src="access-layer.gif" align="absmiddle" border="0" /></p>

<p>Since all classes on the stack implement QueryEngine, each higher layer of control is optional. Only DataNode layer is required for Cayenne to operate. Each higher layer serves as a controller for the underlying layer, adding more functionality. Responsibilities of each class are described below:</p>

<h3><a name="AccessClasses-DataNode"></a>DataNode</h3>
<p>Lowest layer controller class, closest to the database. Its functions are (some of them are delegated to helper classes):</p>

<ul>
	<li>connects to the database obtaining connection via a JDBC DataSource.</li>
	<li>converts Query objects into SQL statements and execute them.</li>
	<li>converts JDBC ResultSets into object snapshots (normally this is objects implementing Map interface).</li>
	<li>generates primary keys for the newly inserted objects.</li>
</ul>


<h3><a name="AccessClasses-DataDomain"></a>DataDomain</h3>
<p>Second layer controller class on top of DataNode. Provides following functionality:</p>

<ul>
	<li>Combines physical datasources (DataNodes) into a logical datasource. For example, when an application fetches data from more than 1 database, programmer need not to be concerned with the details of connection management. DataDomain will route all queries to appropriate DataNode for execution.</li>
	<li>Allows creation of DataSource groups. This is the advanced scenario and may not be used all that often. One example when this is useful is a case of web application hosting. A single application may need to serve multiple companies. Each company would have their own set of databases. For each one of such sets, a DataDomain will be configured. When a user of such application starts a new session, application will need to decide (based on some criteria, like user login id, virtual host URL, etc.) which company this user belongs to, and assign a corresponding DataDomain to a session. This way user view of the database is locked within her company area. "Domain" is a term that Cayenne uses to describe such area. Most of the time all users will work with the same set of DataSources. In this case application will use a "default domain" shared by all users.</li>
	<li>Serves as a factory for both lower level DataNodes as well as higher level DataContexts.</li>
</ul>


<h3><a name="AccessClasses-DataContext"></a>DataContext </h3>
<p>Highest layer controller class. This is the class directly accessed by users in most cases. Provides DataObjects management including these functions:</p>

<ul>
	<li>Isolates in-memory object changes. DataObjects with uncommitted changes are tracked in the context. Changes are not visible outside the context.</li>
	<li>Commits in 1 line of code. If you have a bunch of DataObjects that you modified (changed attribute values, created new objects from scratch, marked objects as deleted), it would nice to commit them all at once without writing any SQL (or even without creating a bunch of Query objects). DataContext tracks all changes to objects, so it will do this for you. Just call "commitChanges".</li>
</ul>
</div>
</div>
  <div class="clearer">.</div>
  <div style="height: 12px; background-image: url('../../../../images/border_bottom.gif'); background-repeat: repeat-x;"></div>

  <div class="smalltext copyright">
    Copyright &copy;2001-2006 ObjectStyle Group and content authors
  </div>

</body>
</html>
